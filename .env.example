# Copy to .env and fill values as needed.
# Tip: if you use 1p-cli, generate .env from this template with your secrets.
#

# ============================================================================
# Docker Port Configuration
# ============================================================================
# Port mapping: host:container (configure only the host port here)
MCP_PORT=6668

# ============================================================================
# MCP Transport Settings
# ============================================================================
# Transport mode: 'stdio' (default, recommended) or 'http'
# Stdio works best for local development and Docker stdin/stdout
MCP_TRANSPORT=stdio

# HTTP transport settings (only used when MCP_TRANSPORT=http)
# REQUIRED: MCP_HTTP_AUTH_TOKEN must be set when using HTTP transport
# Must be at least 16 characters; 32+ recommended for better security
# Quick way to generate and add token: python scripts/generate-auth-token.py
# Manual: python -c "import secrets; print(secrets.token_urlsafe(32))"
MCP_HOST=0.0.0.0
MCP_HTTP_AUTH_TOKEN=your-secret-token-here

# Search similarity threshold (0.0 to 1.0)
MCP_MIN_SCORE=0.55

# ============================================================================
# Outbank CSV Source
# ============================================================================
# Directory containing Outbank CSV export files (relative to docker-compose.yml or absolute path)
OUTBANK_CSV_DIR=./outbank_exports

# Glob pattern for CSV files
OUTBANK_CSV_GLOB=*.csv

# ============================================================================
# Transaction Exclusion Filters
# ============================================================================
# Comma-separated list of categories to exclude from transaction loading.
# Transactions matching any excluded category will not be loaded into memory
# and will never appear in search results.
#
# The exclusion filter checks the following fields:
# - Category (e.g., "Finances & Insurances")
# - Subcategory (e.g., "Transfer")
# - Category-Path (e.g., "Finances & Insurances / Transfer")
#
# Features:
# - Case-insensitive matching (e.g., "transfer" matches "Transfer", "TRANSFER")
# - Partial matching (e.g., "transfer" matches "internal-transfer" or 
#   "Finances & Insurances / Transfer")
# - Whitespace around values is automatically trimmed
#
# Examples:
#   EXCLUDED_CATEGORIES=Transfer,Internal,Reconciliation
#   EXCLUDED_CATEGORIES=Transfer
#   EXCLUDED_CATEGORIES=  Transfer , Internal  (spaces are trimmed)
#
# To disable category exclusions, leave this empty or unset.
EXCLUDED_CATEGORIES=

# Comma-separated list of tags to exclude from transaction loading.
# Transactions with tags matching any excluded tag will not be loaded into memory
# and will never appear in search results.
#
# Features:
# - Case-insensitive matching (e.g., "transfer" matches "Transfer", "TRANSFER")
# - Partial matching (e.g., "transfer" matches "internal-transfer")
# - Whitespace around values is automatically trimmed
#
# Examples:
#   EXCLUDED_TAGS=transfer,internal
#   EXCLUDED_TAGS=transfer
#   EXCLUDED_TAGS=  transfer , internal  (spaces are trimmed)
#
# To disable tag exclusions, leave this empty or unset.
#
# Note: Exclusion filters are applied when transactions are loaded or reloaded.
# After changing these values, use the reload_transactions tool to apply changes.
EXCLUDED_TAGS=

# ============================================================================
# Production Hardening (HTTP Transport)
# ============================================================================
# These settings apply primarily to HTTP transport mode for production use.

# Rate limiting: "<count>/<period>" format
# Examples: "100/minute", "1000/hour", "50/second"
# Leave empty to disable rate limiting
# MCP_RATE_LIMIT=100/minute

# Request timeout in seconds (default: no timeout)
# Prevents hung connections from blocking server resources
# MCP_REQUEST_TIMEOUT=60

# Maximum request payload size in bytes (default: 1MB = 1048576)
# Protects against oversized request payloads
# MCP_MAX_REQUEST_SIZE=1048576

# ============================================================================
# Audit Logging
# ============================================================================
# Audit logging records all tool invocations for compliance and debugging.

# Enable/disable audit logging (default: true for HTTP, false for stdio)
# MCP_AUDIT_ENABLED=true

# Audit log file path (default: ./logs/audit.log)
# The directory will be created automatically if it doesn't exist.
# MCP_AUDIT_LOG=./logs/audit.log
